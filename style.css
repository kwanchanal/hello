/* ============================
   Canvas Playground — style.css
   ============================ */

/* ---- Theme tokens ---- */
:root {
  /* พื้นหลัง: ฟ้ากลาง → เขียวปลาย */
  --bg-blue:  #7ad3ff;
  --bg-green: #d2f27a;

  /* เงาทั่วไป */
  --shadow-md: 0 10px 25px rgba(0,0,0,.16);
  --shadow-lg: 0 20px 50px rgba(0,0,0,.18);
}

/* ---- Base ---- */
* { box-sizing: border-box; }
html, body {
  height: 100%;
  margin: 0;
  font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: #000;          /* กัน flash ขาวตอนโหลด */
  overflow: hidden;          /* ให้ canvas คุมสกรอลล์เอง */
}

/* ---- Canvas (เต็มจอ) ---- */
#canvas {
  position: fixed;
  inset: 0;
  overflow: hidden;
  /* ฟ้าตรงกลาง เขียวรอบนอก */
  background: radial-gradient(65% 65% at 50% 50%, var(--bg-blue) 0%, var(--bg-green) 100%);
  touch-action: none;        /* เราคุม gesture เองใน JS */
}

/* ---- Stage (ตัวที่ถูก pan/zoom) ---- */
#stage {
  position: absolute;
  inset: 0;
  transform-origin: 0 0;
  will-change: transform;
}

/* ---- Draggable elements ---- */
.draggable {
  position: absolute;
  user-select: none;
  -webkit-user-drag: none;
  pointer-events: auto;
  filter: drop-shadow(0 8px 20px rgba(0,0,0,.2));
  will-change: left, top, width, transform, opacity;
  transition: box-shadow .15s ease;
  cursor: grab;
}
.draggable:active {
  cursor: grabbing;
  filter: drop-shadow(0 14px 30px rgba(0,0,0,.26));
}

/* Hover bounce (ทำงานเฉพาะอุปกรณ์ที่รองรับ hover) */
@media (hover:hover) {
  .draggable:hover { animation: hoverBounce .55s ease; }
}
@keyframes hoverBounce {
  0%   { transform: translateY(0) scale(1); }
  40%  { transform: translateY(-5px) scale(1.03); }
  70%  { transform: translateY( 2px) scale(.995); }
  100% { transform: translateY(0) scale(1); }
}

/* Staged entrance */
.entrance { animation: popIn .5s cubic-bezier(.2,.65,.2,1) both; }
@keyframes popIn {
  0%   { opacity: 0; transform: scale(.88) translateY(10px); }
  60%  { opacity: 1; transform: scale(1.04) translateY(-4px); }
  100% { opacity: 1; transform: scale(1) translateY(0); }
}

/* ---- Selection frame (เหลี่ยมแบบ Photoshop) ---- */
.selection {
  position: absolute;
  border: 2px dashed #111;   /* เส้นประดำ */
  border-radius: 0;          /* เหลี่ยม */
  background: transparent;
  box-shadow: none;
  pointer-events: none;      /* ไม่ขวาง mouse ของ element ข้างใน */
  z-index: 5;
}

/* Handles สี่เหลี่ยม */
.handle {
  position: absolute;
  width: 12px; height: 12px;
  background: #fff;
  border: 1px solid #111;
  border-radius: 2px;
  box-shadow: none;
  pointer-events: auto;
  touch-action: none;
}
.handle.nw { left:  -8px; top:   -8px; }
.handle.ne { right: -8px; top:   -8px; }
.handle.sw { left:  -8px; bottom:-8px; }
.handle.se { right: -8px; bottom:-8px; }

/* ---- Hint pill (ด้านล่างกึ่งกลาง) ---- */
#hint {
  position: fixed;
  left: 50%;
  bottom: 20px;
  transform: translateX(-50%);
  background: linear-gradient(90deg, #ff9a9e, #fad0c4, #a18cd1, #fbc2eb);
  background-size: 300% 300%;
  animation: gradientShift 8s ease infinite;
  padding: 10px 18px;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 700;
  color: #000;               /* ตามที่ขอ */
  opacity: .9;
  box-shadow: 0 4px 20px rgba(0,0,0,.12);
  z-index: 10;               /* ให้ลอยเหนือ stage แน่ๆ */
}
@keyframes gradientShift {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ---- Responsive tweaks ---- */
@media (max-width: 640px) {
  #hint {
    font-size: 14px;
    padding: 12px 14px;
    bottom: calc(env(safe-area-inset-bottom, 0) + 12px);
  }
}
